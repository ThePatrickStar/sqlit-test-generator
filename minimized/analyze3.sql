BEGIN;
CREATE TABLE t1(x INTEGER, y);
CREATE INDEX i1 ON t1(x);
COMMIT;
ANALYZE;
SELECT count(*) FROM t1 WHERE x>200 AND x<300;
SELECT count(*) FROM t1 WHERE x>0 AND x<1100;
SELECT sum(y) FROM t1 WHERE x>200 AND x<300;
SELECT sum(y) FROM t1 WHERE x>0 AND x<1100;
SELECT sum(y) FROM t1 WHERE x>$l AND x<$u;
SELECT sum(y) FROM t1 WHERE x>$l AND x<$u;
SELECT sum(y) FROM t1 WHERE x>$l AND x<$u;
SELECT sum(y) FROM t1 WHERE x>$l AND x<$u;
SELECT sum(y) FROM t1 WHERE x>$l AND x<$u;
BEGIN;
CREATE TABLE t2(x TEXT, y);
INSERT INTO t2 SELECT * FROM t1;
CREATE INDEX i2 ON t2(x);
COMMIT;
ANALYZE;
SELECT count(*) FROM t2 WHERE x>1 AND x<2;
SELECT count(*) FROM t2 WHERE x>0 AND x<99;
SELECT sum(y) FROM t2 WHERE x>1 AND x<2;
SELECT sum(y) FROM t2 WHERE x>0 AND x<99;
BEGIN;
CREATE TABLE t3(y TEXT, x INTEGER);
INSERT INTO t3 SELECT y, x FROM t1;
CREATE INDEX i3 ON t3(x);
COMMIT;
ANALYZE;
SELECT count(*) FROM t3 WHERE x>200 AND x<300;
SELECT count(*) FROM t3 WHERE x>0 AND x<1100;
SELECT sum(y) FROM t3 WHERE x>200 AND x<300;
SELECT sum(y) FROM t3 WHERE x>0 AND x<1100;
PRAGMA case_sensitive_like=off;
BEGIN;
CREATE TABLE t1(a, b TEXT COLLATE nocase);
CREATE INDEX i1 ON t1(b);
SELECT count(a) FROM t1 WHERE b LIKE 'a%';
SELECT count(a) FROM t1 WHERE b LIKE '%a';
BEGIN;
CREATE TABLE t1(a, b, c);
CREATE INDEX i1 ON t1(b);
SELECT * FROM t1 WHERE a IN (;
SELECT * FROM t1 WHERE a IN (;
SELECT * FROM t1 WHERE a IN (;
CREATE TABLE t4(x, y TEXT COLLATE NOCASE);
CREATE INDEX i4 ON t4(y);
SELECT * FROM t4 WHERE x != ? AND y LIKE ?;
BEGIN;
CREATE TABLE t1(a, b, c);
CREATE INDEX i1 ON t1(b);
CREATE TABLE t1(x TEXT COLLATE NOCASE);
CREATE INDEX i1 ON t1(x);
INSERT INTO t1 VALUES('aaa');
INSERT INTO t1 VALUES('abb');
INSERT INTO t1 VALUES('acc');
INSERT INTO t1 VALUES('baa');
INSERT INTO t1 VALUES('bbb');
INSERT INTO t1 VALUES('bcc');
CREATE INDEX i1 ON t1(a, b);
CREATE INDEX i2 ON t1(c);
SELECT * FROM t1 WHERE a = 5 AND c = 13;
SELECT * FROM t1 WHERE a = 5 AND b > 'w' AND c = 13;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1(a INTEGER PRIMARY KEY, b, c);
INSERT INTO t1 VALUES(1,1,'0000');
CREATE INDEX t0b ON t1(b);
ANALYZE;
SELECT c FROM t1 WHERE b=3 AND a BETWEEN 30 AND hex(1);
CREATE TABLE t1(a,b,c);
CREATE INDEX t1a ON t1(a);
ANALYZE;
SELECT * FROM sqlite_stat1;
INSERT INTO sqlite_stat1(tbl,idx,stat) VALUES('t1','t1a','12000');
INSERT INTO sqlite_stat1(tbl,idx,stat) VALUES('t1','t1a','12000');
ANALYZE sqlite_master;
